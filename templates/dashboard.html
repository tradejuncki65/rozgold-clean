{% extends 'layout.html' %}
{% block content %}

<h2 class="mb-4">Welcome back, {{ user.username }} ðŸ‘‹</h2>

<!-- Summary Cards -->
<div class="dashboard-summary" style="display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 30px;">
  <div style="flex: 1; min-width: 200px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
    <h4>Total Invested</h4>
    <p style="font-size: 24px; color: #ffc107;"><strong>${{ "%.2f"|format(total_invested) }}</strong></p>
  </div>
  <div style="flex: 1; min-width: 200px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
    <h4>ROI Earned</h4>
    <p style="font-size: 24px; color: #28a745;"><strong>${{ "%.2f"|format(total_roi_earned) }}</strong></p>
  </div>
  <div style="flex: 1; min-width: 200px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
    <h4>Withdrawn</h4>
    <p style="font-size: 24px; color: #007bff;"><strong>${{ "%.2f"|format(total_withdrawn) }}</strong></p>
  </div>
  <div style="flex: 1; min-width: 200px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
    <h4>Active Investments</h4>
    <p style="font-size: 24px; color: #6c757d;"><strong>{{ active_investments }}</strong></p>
  </div>
</div>

<!-- ROI Chart -->
<canvas id="roiChart" height="120"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById('roiChart').getContext('2d');
  const roiChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['Total Invested', 'ROI Earned', 'Withdrawn'],
      datasets: [{
        label: 'USD',
        data: [
          {{ total_invested|default(0, true) }},
          {{ total_roi_earned|default(0, true) }},
          {{ total_withdrawn|default(0, true) }}
        ],
        backgroundColor: ['#ffc107', '#28a745', '#007bff']
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { display: false },
        title: { display: true, text: 'Your Investment Overview' }
      }
    }
  });
</script>

<!-- Action Links -->
<div style="margin-top: 30px;">
  <a href="{{ url_for('invest') }}" class="btn btn-warning">âž• New Investment</a>
  <a href="{{ url_for('my_investments') }}" class="btn btn-secondary">ðŸ“„ Investment History</a>
  <a href="{{ url_for('account') }}" class="btn btn-info">ðŸ‘¤ Manage Account</a>
  <a href="{{ url_for('logout') }}" class="btn btn-danger">ðŸšª Logout</a>
</div>

{% endblock %}





